{# templates/inspection/complete.html.twig #}

{% extends '/base.html.twig' %}

{% block title %}
    {{ inspection.title }}
{%  endblock %}

{%  block custom_styles %}
    <style>
        body {
            background-color: rgb(191 219 254);
        }
        .card-header {
            background-color: white;
            color: black;
            font-weight: bold;
        }
        .accordion-button::after {
            content: '';
        }
        .accordion-button {
            background-color: white;
            color: black;
        }
        .accordion-button.collapsed .fas {
            transform: rotate(0deg);
        }
        .accordion-button .fas {
            transform: rotate(180deg);
            transition: transform 0.2s;
        }
    </style>
{%  endblock %}


{% block body %}


<main class="p-2 bg-blue-200 h-[100%]">

    <div class="container mt-3 mb-3 bg-blue-500   ">
        <div class="alert alert-info" role="alert">
            <div class="mt-2 grid grid-cols-2">
                <div class="flex flex-1 justify-start items-end">
                    <h2 class="w-100 text-xl card-title fw-bold">{{ inspection.title }}</h2>
                </div>
                <div class="flex justify-end">
                    <button class="flex btn flex justify-end position-relative" style="width: 60px; top: 0px;">
                        <i class=" text-3xl bold {% if inspection.type == 'inspeccion' %}bi bi-folder2-open{% else %}bi bi-pencil-square{% endif %}"></i>
                    </button>
                </div>
            </div>

            <div class="grid grid-cols-2 justify-start align-items-start">
                <h3 class="text-md card-title fw-bold justify-content-start items-start" style="color: #555555">{{ inspection.business }}</h3>
                <p class="card-text flex justify-end items-start">
                    <span class="text-md fw-bold" style="color: black; margin-left: 10px;">{{ inspection.number }}</span>
                </p>
            </div>



        </div>
    </div>


    <dotlottie-player  class="absolute w-[100vw] h-[60vh] z-5 top--1"  src="/images/congrats3.json" background="transparent" speed="0.65"   autoplay ></dotlottie-player>


    <div class="max-w-3xl mx-auto p-6 bg-white rounded-lg shadow-lg">
        <h1 class="text-2xl font-bold text-gray-800 mb-6">Resumen de la Inspección</h1>

        <div class="space-y-6">
            {% for step, question in questions %}
                <div class="bg-gray-100 p-4 rounded-lg">
                    <h2 class="text-xl font-semibold text-gray-700">{{ question.title }}</h2>
                    {% set response = formResponse[step] %}

                    {% if response[question.ref] is iterable %}
                        <ul class="mt-3 list-disc list-inside">
                            {% for choice in response[question.ref] %}
                                <li>{{ choice }}</li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <p class="mt-3 text-gray-600">{{ response[question.ref] == 'true' ? 'Sí' : 'No' }}</p>
                    {% endif %}
                </div>
            {% endfor %}
        </div>


        <div class="relative mt-10 text-center z-5">
            <a  href="{{ path('inspection_form_step', {'inspection_id': inspection_id, 'step': 0}) }}" class="relative z-max inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md">
                Corregir
            </a>
        </div>
    </div>

    <dotlottie-player class="md:relative bottom-[20vh] bg-white-20" src="/images/congrats1.json" speed="0.50"  style="background: transparent; width: 350px; height: 320px;" loop autoplay></dotlottie-player>

    <script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs" type="module"></script>
</main>
{% endblock %}
