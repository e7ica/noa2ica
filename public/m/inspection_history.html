<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historial de Inspecciones</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" >
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        .inspection-thread {
            position: relative;
            padding-left: 2rem;
        }
        .inspection-thread::before {
            content: '';
            position: absolute;
            left: 0.75rem;
            top: 2rem;
            bottom: 0;
            width: 2px;
            background-color: #9CA3AF;
        }
        .inspection-card {
            position: relative;
        }
        .inspection-card::before {
            content: '';
            position: absolute;
            left: -2rem;
            top: 1.5rem;
            width: 1rem;
            height: 2px;
            background-color: #9CA3AF;
        }
        .inspection-card::after {
            content: '';
            position: absolute;
            left: -2.25rem;
            top: 1rem;
            width: 1rem;
            height: 1rem;
            border-radius: 50%;
            background-color: #fff;
            border: 2px solid #9CA3AF;
        }
        .inspection-card.origin::after {
            background-color: #9CA3AF;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center">
<div class="container content-center md:max-w-[920px]" x-data="{ showMore: false }">
    <div class="w-full bg-gray h-[100vh]">
        <header class="bg-white mb-4 rounded-b-2xl md:rounded-b-2xl rounded-t-xl md:roundend-t-2xl mt-0">
            <div class="container flex flex-col items-center justify-around mx-0 mt-0 mb-0 bg-blue-100 text-blue-900 px-6 py-4 rounded">
                <div class="flex flex-col w-full h-auto items-start md:p-8">
                    <h2 class="flex-auto flex text-xl font-bold md:text-2xl">
                        Historial de Inspecciones
                    </h2>
                    <h3 class="flex-auto flex text-md font-bold text-gray-600 md:text-xl">
                        Carniceria El Lobo
                    </h3>
                </div>
                <!-- Nuevo resumen de inspecciones -->
                <div class="w-full mt-4 grid grid-cols-2 md:grid-cols-4 gap-2">
                    <div class="bg-white p-2 rounded-lg shadow text-center">
                        <p class="text-sm font-bold">Total</p>
                        <p class="text-lg font-bold">15</p>
                    </div>
                    <div class="bg-green-100 p-2 rounded-lg shadow text-center">
                        <p class="text-sm font-bold text-green-800">Aprobadas</p>
                        <p class="text-lg font-bold text-green-800">8</p>
                    </div>
                    <div class="bg-yellow-100 p-2 rounded-lg shadow text-center">
                        <p class="text-sm font-bold text-yellow-800">Emplazadas</p>
                        <p class="text-lg font-bold text-yellow-800">5</p>
                    </div>
                    <div class="bg-red-100 p-2 rounded-lg shadow text-center">
                        <p class="text-sm font-bold text-red-800">Rechazadas</p>
                        <p class="text-lg font-bold text-red-800">2</p>
                    </div>
                </div>
            </div>
        </header>

        <main class="p-2 bg-white mb-4 rounded-t-2xl md:roundend-t-2xl rounded-b-2xl md:roundend-b-2xl">
            <div class="bg-white w-full mb-16">
                <div class="history-container p-4 bg-gray-100 rounded-lg shadow-md">
                    <h4 class="text-md font-bold mb-4 bg-gray-50 w-full text-center underline">Inspecciones Realizadas</h4>

                    <div class="inspections-list grid grid-cols-1 gap-4">
                        <!-- Inspección Emplazada (Inspección original) -->
                        <div class="inspection-thread">
                            <div class="inspection-card origin bg-white p-4 rounded-lg shadow-sm border-l-4 border-yellow-400 mb-4">
                                <div class="flex justify-between items-center mb-2">
                                    <h3 class="text-lg font-semibold">#00001 - 15/03/2024</h3>
                                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800">
                                        Emplazada
                                    </span>
                                </div>
                                <p class="text-sm text-gray-700 font-semibold mb-2">Categoría: Higiene y Sanidad</p>
                                <div class="flex items-center mb-2">
                                    <img src="https://i.pravatar.cc/40?img=1" alt="Juan Pérez" class="w-8 h-8 rounded-full mr-2">
                                    <p class="text-sm text-gray-600">Inspector: Juan Pérez</p>
                                </div>
                                <p class="text-sm text-gray-600 mb-4">Comentarios: Se encontraron algunas irregularidades menores en la limpieza de equipos.</p>
                                <a href="/inspection/1/summary" class="text-blue-600 hover:text-blue-800">Ver detalles</a>
                            </div>
                            
                            <!-- Inspección de seguimiento (Aprobada) -->
                            <div class="inspection-card bg-white p-3 rounded-lg shadow-sm border-l-4 border-green-400 mb-2">
                                <div class="flex justify-between items-center mb-1">
                                    <h3 class="text-md font-semibold">#00002 - 22/03/2024</h3>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Aprobada
                                    </span>
                                </div>
                                <p class="text-sm text-gray-700 mb-1">Seguimiento de Higiene y Sanidad</p>
                                <p class="text-sm text-gray-600 mb-2">Se han corregido las irregularidades encontradas en la inspección anterior.</p>
                                <a href="/inspection/2/summary" class="text-sm text-blue-600 hover:text-blue-800">Ver detalles</a>
                            </div>
                        </div>

                        <!-- Inspección Rechazada (Nueva inspección sin relación) -->
                        <div class="inspection-thread">
                            <div class="inspection-card origin bg-white p-4 rounded-lg shadow-sm border-l-4 border-red-400">
                                <div class="flex justify-between items-center mb-2">
                                    <h3 class="text-lg font-semibold">#00003 - 05/04/2024</h3>
                                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800">
                                        Rechazada
                                    </span>
                                </div>
                                <p class="text-sm text-gray-700 font-semibold mb-2">Categoría: Cumplimiento Normativo</p>
                                <div class="flex items-center mb-2">
                                    <img src="https://i.pravatar.cc/40?img=3" alt="Carlos Rodríguez" class="w-8 h-8 rounded-full mr-2">
                                    <p class="text-sm text-gray-600">Inspector: Carlos Rodríguez</p>
                                </div>
                                <p class="text-sm text-gray-600 mb-4">Comentarios: Se encontraron graves incumplimientos de normativas de almacenamiento.</p>
                                <a href="/inspection/3/summary" class="text-blue-600 hover:text-blue-800">Ver detalles</a>
                            </div>
                        </div>
                    </div>

                    <!-- Botón "Ver más" -->
                    <div class="mt-6 text-center">
                        <button 
                            @click="showMore = !showMore" 
                            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
                            x-text="showMore ? 'Ver menos' : 'Ver más'"
                        ></button>
                    </div>
                </div>
            </div>
        </main>

        <div class="fixed bottom-0 w-full md:max-w-[920px] bg-white p-2">
            <div class="flex row w-full items-center justify-between border-indigo-200 border-t-2 p-2">
                <div class="row">
                    <a id="back-btn" type="button" class="btn btn-ghost md:text-lg" href="/dashboard">Volver al Dashboard</a>
                </div>
                <div class="row">
                    <a id="new-inspection-btn" type="button" class="btn btn-primary md:text-lg" href="/inspection/new">Nueva Inspección</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Aquí puedes agregar cualquier JavaScript adicional si es necesario
</script>
</body>
</html>